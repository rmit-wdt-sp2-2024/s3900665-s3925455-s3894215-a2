@model MCBA_Web_App.Models.Customer

@{
    ViewData["Title"] = "My Profile";
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - MCBA</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" />
    <style>
        .profile-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        .profile-picture {
            border-radius: 50%;
            width: 150px;
            height: 150px;
            object-fit: cover;
        }
        .profile-info {
            flex: 1;
            margin-left: 20px;
        }
    </style>
</head>
<body>
    <div class="container mt-5">
        <div class="profile-header">
            <h1>My Profile</h1>
            <div>
                @if (!string.IsNullOrEmpty(Model.ProfilePictureFileName))
                {
                    <img src="@Url.Content("~/profile_images/" + Model.ProfilePictureFileName)" alt="Profile Picture" class="profile-picture" />
                }
                else
                {
                    <img src="@Url.Content("~/profile_images/default_profile_image.jpg")" alt="Default Profile Picture" class="profile-picture" />
                }
            </div>
        </div>

        <table class="table table-bordered">
            <thead class="thead-light">
                <tr>
                    <th>@Html.DisplayNameFor(model => model.Name)</th>
                    <th>@Html.DisplayNameFor(model => model.TFN)</th>
                    <th>@Html.DisplayNameFor(model => model.Address)</th>
                    <th>@Html.DisplayNameFor(model => model.City)</th>
                    <th>@Html.DisplayNameFor(model => model.State)</th>
                    <th>@Html.DisplayNameFor(model => model.Postcode)</th>
                    <th>@Html.DisplayNameFor(model => model.Mobile)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>@Html.DisplayFor(modelItem => Model.Name)</td>
                    <td>@Html.DisplayFor(modelItem => Model.TFN)</td>
                    <td>@Html.DisplayFor(modelItem => Model.Address)</td>
                    <td>@Html.DisplayFor(modelItem => Model.City)</td>
                    <td>@Html.DisplayFor(modelItem => Model.State)</td>
                    <td>@Html.DisplayFor(modelItem => Model.Postcode)</td>
                    <td>@Html.DisplayFor(modelItem => Model.Mobile)</td>
                </tr>
            </tbody>
        </table>

        <div class="d-flex justify-content-between">
            <a class="btn btn-primary" asp-action="Edit" asp-route-id="@Model.CustomerID">Edit Profile</a>
            <a class="btn btn-link" href="#changePassword">Change Password</a>
        </div>

        <div class="col-md-6 mt-4" id="changePassword">
            <h3>Change Password</h3>
            <form asp-action="UpdatePassword">
                @Html.ValidationSummary(true, "", new { @class = "text-danger" })

                <div class="form-group">
                    <label for="NewPassword" class="control-label">New Password</label>
                    <input id="NewPassword" name="NewPassword" type="password" class="form-control"
                           data-val="true" data-val-required="The New Password field is required." />
                </div>
                <div class="form-group">
                    <label for="ConfirmPassword" class="control-label">Confirm Password</label>
                    <input id="ConfirmPassword" name="ConfirmPassword" type="password" class="form-control"
                           data-val="true" data-val-required="The Confirm Password field is required." />
                    @Html.ValidationMessage("ConfirmPassword", new { @class = "text-danger" })
                </div>
                <div class="form-group">
                    <input type="submit" value="Update" class="btn btn-primary" />
                </div>
                @Html.ValidationMessage("PasswordFailed", new { @class = "text-danger" })
            </form>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
